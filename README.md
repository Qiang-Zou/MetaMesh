# LatticeMesher: MetaMeshing and Triangulating Large-Scale Lattice Structures (Million or Billion Scales)

- By: Yunzhu Gao and Qiang Zou (built on top of Charlie C.L. Wang's MeshWorks)
-  email: qzou.code@gmail.com
- webpage: https://qiang-zou.github.io/
- Latest Release: 2024.08.05

## !important
The source code is for the method presented in [1].

It can be compiled with QT 6.2.4 + GCC 11.4.0 + CUDA 12.2 , and run on the operating system Ubuntu 22.04 LTS. Windows, Mac, and other compilers should also work.


1.Copyright
-----------

- LatticeMesher is GNU licensed. It is developed and maintained by Yunzhu Gao and Qiang Zou for research use. All rights about the program are reserved by Yunzhu Gao and Qiang Zou. This C++ source codes are available only to a primary user for academic purposes. No secondary use, such as copy, distribution, diversion, business purpose, etc., is allowed. In no event shall the author be liable to any party for direct, indirect, special, incidental, or consequential damage arising out of the use of this program. LatticeMesher is self-contained.


2.Download
----------

- The source code, as well as the test cases, can be downloaded from the page: 

  webpage: https://github.com/Qiang-Zou/MetaMesh

3.Installing & Compiling (Windows/Linux/Mac + QT 6.2.4 + GCC 11.4.0 + CUDA 12.2)
-------------------------------------------

- Install CMake(Version>=3.18) and GCC for build essentials.

  ```shell
  sudo apt install build-essential
  ```

- Download CUDA, QT and TBB library. Please select the appropriate version on the official website.

  QT: https://download.qt.io/archive/qt/

  TBB: https://github.com/oneapi-src/oneTBB

  CUDA: https://developer.nvidia.com/cuda-toolkit-archive

  Before using this code, make sure you have set up relative third-party library's path.

- Download the source code of this project to a suitable place and make sure the paths of QT, CUDA and TBB are correctly set in the environment. Then build this project to obtain the binary executable file in this way (the unix way):

  ```shell
  mkdir build
  cd build
  cmake -DCMAKE_CUDA_COMPILER "your_nvcc_path" -DCMAKE_CUDA_FLAGS="-m64 -arch=sm_86" ..
  make
  ```

4.Usage
-------

- After the compilation you can run the executable file 3DPrintPlanner inside the ./build directory.

- To triangulate a model, you can simply right click in the GUI, and navigate to "Triangulation->Meta Meshing". After that you will be asked to input several necessary parameters through the terminal to run the program. You can choose the strut's radius and the chord error to control the triangulation quality.

- Note the triangulation result (`.stl` file) is under the same directory of the input model. And the data files are organized as follows:

  ```
  example_model
  ├── example_model.edge
  ├── example_model.node
  ├── example_model.stl
  ```

5.File format
-------------

- The input file should be `.node` and `.edge` files. These files can be generated by `tetgen`, which generates tetrahedral meshes of any 3D polyhedral domains.
- `.node` file: lattice node file
  - line 1: node_number
  - lines 2-n: x y z

- `.edge` file: lattice edge file
  - line 1: edge_number
  - lines 2-n: start_node end_node


6.References
-------------

- [1] Qiang Zou, Yunzhu Gao, Guoyue Luo, Sifan Chen, Meta-meshing and triangulating lattice structures at a large scale. Computer-Aided Design (2024).
- [2] Yaonaiming Zhao, Qiang Zou, Guoyue Luo, Jiayu Wu, Sifan Chen, TPMS2STEP: error-controlled and C2 continuity-preserving translation of TPMS models to STEP files based on constrained-PIA. Computer-Aided Design (2024).
- [3] Shengjun Liu, Tao Liu, Qiang Zou, Weiming Wang, Eugeni L. Doubrovski, and Charlie C.L. Wang, "Memory-efficient modeling and slicing of large-scale adaptive lattice structures", ASME Transactions - Journal of Computing and Information Science in Engineering, vol.21, no.6, 061003 (16 pages), May 2021.
